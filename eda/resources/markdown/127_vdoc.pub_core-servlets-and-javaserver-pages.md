## 15.3 Including Static or Dynamic Content

## Listing 15.9 HotelInfo.java

package coreservlets;

/** Simple class describing a hotel name and associated

- *  frequent guest number, used from the TravelData class
- *  (where an array of HotelInfo is associated with
- *  each customer).

*/

```
public class HotelInfo { private String hotelName, frequentGuestNumber; public HotelInfo(String hotelName, String frequentGuestNumber) { this.hotelName = hotelName; this.frequentGuestNumber = frequentGuestNumber; } public String getHotelName() { return(hotelName); } public String getfrequentGuestNumber() { return(frequentGuestNumber); } }
```

## 15.3 Including Static or Dynamic Content

If a servlet uses the forward method of RequestDispatcher , it cannot actually send any output to the client-it must leave that entirely to the destination page. If the servlet wants to generate some of the content itself but use a JSP page or static HTML document for other parts of the result, the servlet can use the include method of RequestDispatcher instead. The process is very similar to that for forwarding requests: call the getRequestDispatcher method of ServletContext with an address relative to the server root, then call include with  the HttpServletRequest and HttpServletResponse . The two differences when include is used are that you can send content to the browser before making the call and that control is returned to the servlet after  the include call  finishes.  Although  the  included  pages  (servlets,  JSP

Home page for this book: www.coreservlets.com; Home page for sequel: www.moreservlets.com. Servlet and JSP training courses by book's author: courses.coreservlets.com.

## Chapter 15 Integrating Servlets and JSP

pages, or even static HTML) can send output to the client, they should not try to set HTTP response headers. Here is an example:

```
response.setContentType("text/html"); PrintWriter out = response.getWriter(); out.println("..."); RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/path/resource"); dispatcher.include(request, response); out.println("...");
```

The include method  has  many  of  the  same  features  as  the forward method. If  the original method  uses POST ,  so  does  the  forwarded  request. Whatever request data was associated with the original request is also associated with the auxiliary request, and you can add new parameters (in version 2.2  only)  by  appending  them  to  the  URL  supplied  to getRequestDispatcher .  Also supported in version 2.2 is the ability to get a RequestDispatcher by name ( getNamedDispatcher )  or by using a relative URL (use the getRequestDispatcher method of the HttpServletRequest ); see Section  15.1  (Forwarding  Requests)  for  details.  However, include does  one thing that forward does not: it automatically sets up attributes in the HttpServletRequest object  that  describe the  original request path in case the included  servlet  or  JSP  page  needs  that  information.  These  attributes, available  to  the  included  resource  by  calling getAttribute on  the HttpServletRequest , are listed below:

- · javax.servlet.include.request\_uri
- · javax.servlet.include.context\_path
- · javax.servlet.include.servlet\_path
- · javax.servlet.include.path\_info
- · javax.servlet.include.query\_string

Note that  this  type  of  file  inclusion  is  not  the  same  as  the  nonstandard servlet chaining supported as an extension by several early servlet engines. With servlet chaining, each servlet in a series of requests can see (and modify)  the  output  of  the  servlet  before  it.  With  the include method  of RequestDispatcher , the included resource cannot see the output generated by the original servlet. In fact, there is no standard construct in the servlet specification that reproduces the behavior of servlet chaining.