# Software Design Document (SDD)

## 1. System Architecture

### Overall Design
The guestbook web application follows a modular design pattern, promoting separation of concerns and maintainability. The main architectural components include:

- **Frontend**:
  - **JSP Pages**: Handle user interaction and display data. Includes pages for user registration (`register.jsp`), database setup (`setupdb.jsp`), and displaying the guestbook (`index.jsp`).
  - **HTML/CSS**: Present data to the user in a structured and visually appealing manner.
- **Backend**:
  - **Servlets**: Handle HTTP requests, process user input, and interact with the database. Includes `AccountManager` for user management, `PostManager` for post-related operations, and other servlets for each functionality area.
  - **Repository**: Manages database operations, providing a layer of abstraction for data access.
  - **Domain Models**: Represent core entities such as `User` and `Post`, encapsulating attributes and behaviors relevant to guestbook functionality.

### Key Components
- **User Management Module**:
  - Handles user registration, authentication, and logout functionalities.
  - Employs `AccountManager` for processing user requests and maintaining session state.
- **Post Management Module**:
  - Manages the creation of new posts, associating them with users.
  - Utilizes `PostManager` to interact with the database via `Repository`.
- **Database Interaction**:
  - Manages CRUD (Create, Read, Update, Delete) operations for users and posts.
  - Abstracts database interactions through `Repository`, ensuring encapsulation of database access logic.
- **Domain Models**:
  - `User`: Represents user entities with attributes like ID, username, and password.
  - `Post`: Represents posts made by users, including attributes such as username, timestamp, and message content.

## 2. Functional Requirements

### Input Handling
- **User Registration/Login/Logout**:
  - Users interact with the frontend via JSP pages to register, log in, and log out.
  - Inputs include personal information for registration (username, password, etc.) and login credentials.
  - Actions are triggered via HTTP requests mapped to respective servlets.
- **Post Creation**:
  - Users create posts through the frontend, interacting with `index.jsp` and related servlet logic.
  - Inputs required include a username (pre-populated based on authenticated user), timestamp, and the message content.
  - Inputs are handled through POST requests to `PostManager` for processing.

### Data Processing
- **User Authentication/Authorization**:
  - Validates user credentials against the database.
  - Maintains session state for authenticated users, facilitating access to personalized features.
- **Post Management**:
  - Validates and processes new post submissions.
  - Ensures that posts are associated with valid user credentials.
- **Database Operations**:
  - Executes SQL queries to insert, retrieve, update, and delete records in `users` and `posts` tables.
  - Handles transactions to ensure data integrity across operations.

### Output Generation
- **Registration Form Display**:
  - Presents JSP page (`register.jsp`) to users for registration.
  - Displays feedback based on registration success or failure.
- **Login/Logout Confirmation**:
  - Upon successful login, displays `index.jsp`.
  - On logout, redirects to `index.jsp` with session invalidated.
- **Guestbook Display**:
  - Renders `index.jsp` to display current posts, including post content, username, and timestamp.
  - User-specific actions (replies, editing/deleting posts) are initialized via servlet interactions.

## 3. Business Requirements

### Business Rules
- **Unique Usernames**: Each user must have a unique username.
- **Password Security**: Passwords must be stored in a secure, hashed format.
- **Post Privacy**: Users can view their own posts but not those of others.
- **Guestbook Integrity**: Posts must include valid user information and adhere to format guidelines.

### Success Criteria (Acceptance Criteria)
- **Success Criterion 1**: Users can successfully register with a unique username and password stored securely.
- **Success Criterion 2**: Authenticated users can create, view, and manage posts according to their access level.
- **Success Criterion 3**: The system maintains data integrity with all database operations (CRUD) executed correctly through `Repository`.
- **Success Criterion 4**: The guestbook is accessible to authenticated users, with the option for anonymized posting visible to all guests.

This structure provides a comprehensive overview suitable for technical and non-technical stakeholders, focusing on universal architectural concepts and business logic applicable across technologies.